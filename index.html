<!DOCTYPE html>
<html lang="en" class="dark-theme">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OKLCH for Mathematical Content</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        // MathJax Configuration
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']],
                processEscapes: true,
                tags: 'ams'
            },
            svg: {
                fontCache: 'global'
            }
        };
    </script>
    <script type="text/javascript" id="MathJax-script" async
        src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@400;600;700&family=Fira+Code:wght@400&display=swap" rel="stylesheet">
    <style>
        /* Basic theme setup using OKLCH */
        :root {
            /* We define the L, C, H components separately for modular control */
            --surface-1-l: 15; --surface-1-c: 0.02; --surface-1-h: 250;
            --surface-2-l: 20; --surface-2-c: 0.025; --surface-2-h: 250;
            --surface-3-l: 25; --surface-3-c: 0.03; --surface-3-h: 250;
            
            --text-primary-l: 95; --text-primary-c: 0.01; --text-primary-h: 250;
            --text-secondary-l: 65; --text-secondary-c: 0.01; --text-secondary-h: 250;

            --accent-equation-l: 75; --accent-equation-c: 0.15; --accent-equation-h: 90;
            --accent-link-l: 70; --accent-link-c: 0.18; --accent-link-h: 250;

            /* Composite variables that use the components */
            --surface-1: oklch(var(--surface-1-l)% var(--surface-1-c) var(--surface-1-h));
            --surface-2: oklch(var(--surface-2-l)% var(--surface-2-c) var(--surface-2-h));
            --surface-3: oklch(var(--surface-3-l)% var(--surface-3-c) var(--surface-3-h));
            
            --text-primary: oklch(var(--text-primary-l)% var(--text-primary-c) var(--text-primary-h));
            --text-secondary: oklch(var(--text-secondary-l)% var(--text-secondary-c) var(--text-secondary-h));
            
            --accent-equation: oklch(var(--accent-equation-l)% var(--accent-equation-c) var(--accent-equation-h));
            --accent-link: oklch(var(--accent-link-l)% var(--accent-link-c) var(--accent-link-h));

            font-family: 'Work Sans', sans-serif;
            color-scheme: dark;
        }

        body {
            background-color: var(--surface-1);
            color: var(--text-primary);
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        
        h1, h2, h3 { font-weight: 600; letter-spacing: -0.02em; }
        p { line-height: 1.7; color: var(--text-secondary); }
        strong { color: var(--text-primary); font-weight: 600; }
        a { color: var(--accent-link); font-weight: 600; text-decoration: none; transition: color 0.2s ease; }
        a:hover { color: oklch(from var(--accent-link) calc(l + 0.1) c h); }

        .key-equation-wrapper {
            margin: 2.5rem 0;
            display: flex;
            justify-content: center;
        }
        .key-equation {
            background-color: var(--surface-2);
            color: var(--accent-equation);
            padding: 1.5rem 2rem;
            border-radius: 12px;
            border: 1px solid var(--surface-3);
            font-size: 1.5rem;
            transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
        }
        
        .card {
            background-color: var(--surface-2);
            border: 1px solid var(--surface-3);
            border-radius: 12px;
            padding: 2rem;
            transition: background-color 0.3s ease, border-color 0.3s ease;
        }
        
        .color-control-panel {
            display: none;
            grid-template-columns: 1fr 3fr 0.5fr;
            gap: 1rem;
            align-items: center;
            padding-top: 1rem;
            margin-top: 0.5rem;
            border-top: 1px solid var(--surface-3);
        }
        .color-control-panel.active { display: grid; }
        
        .color-swatch {
            width: 2rem;
            height: 2rem;
            border-radius: 0.5rem;
            cursor: pointer;
            border: 2px solid var(--surface-3);
        }
        
        .slider-label, .value-label {
            font-family: 'Fira Code', monospace;
            font-size: 0.875rem;
            color: var(--text-secondary);
        }
        
        .draggable-value {
            cursor: ew-resize;
            padding: 0.1rem 0.2rem;
            border-radius: 4px;
            transition: background-color 0.2s ease;
        }
        .draggable-value:hover {
            background-color: var(--surface-3);
            color: var(--text-primary);
        }

        input[type="range"] {
            -webkit-appearance: none; appearance: none;
            width: 100%; height: 8px;
            /* Changed to a lighter color for better visibility */
            background: var(--surface-3);
            border-radius: 5px; outline: none; opacity: 0.8;
            transition: opacity .2s;
        }
        input[type="range"]:hover { opacity: 1; }
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none; appearance: none;
            width: 20px; height: 20px;
            background: var(--text-primary);
            cursor: pointer; border-radius: 50%;
            border: 3px solid var(--surface-2);
        }
        input[type="range"]::-moz-range-thumb {
            width: 20px; height: 20px;
            background: var(--text-primary);
            cursor: pointer; border-radius: 50%;
            border: 3px solid var(--surface-2);
        }
    </style>
</head>
<body class="antialiased">

    <div class="max-w-4xl mx-auto px-6 py-16 md:py-24">
        
        <header class="text-center mb-16">
            <h1 class="text-4xl md:text-5xl font-bold mb-4">A Practical Guide to OKLCH</h1>
            <p class="text-xl max-w-2xl mx-auto">Discover a more intuitive, human-centric way to work with color for your mathematical and technical content.</p>
        </header>

        <main class="space-y-12">
            
            <section id="why-oklch">
                <h2 class="text-3xl mb-6">Why OKLCH is a Revolution for Web Color</h2>
                <div class="prose prose-invert max-w-none space-y-4">
                    <p>For years, we've used color models like <strong>RGB</strong> and <strong>HSL</strong>. While functional, they are based on how machines create color, not how humans perceive it. This leads to unpredictable results. For example, in HSL, a yellow and a blue with the same "Lightness" value look wildly different in brightness.</p>
                    <p><strong>OKLCH</strong> fixes this. It's a modern color space designed around human vision. Its components are intuitive:</p>
                    <ul class="list-disc pl-6 space-y-2">
                        <li><strong>L (Lightness):</strong> How bright a color appears, from 0% (black) to 100% (white). This is <strong>perceptually uniform</strong>.</li>
                        <li><strong>C (Chroma):</strong> The "amount" of color or intensity. 0 is gray, and higher values are more vivid.</li>
                        <li><strong>H (Hue):</strong> The angle on the color wheel (0-360).</li>
                    </ul>
                    <p>This predictability is a superpower. It allows us to create accessible, systematic, and beautiful color palettes with mathematical precisionâ€”perfect for the clear communication required in mathematics.</p>
                </div>
            </section>

            <section id="how-to">
                <h2 class="text-3xl mb-6">Creating a Palette for Math Content</h2>
                <p class="mb-4">A good palette for mathematical content prioritizes clarity and focus. We'll use a dark theme as our example, as it reduces eye strain. The key is to avoid pure black and pure white, and instead use layered surfaces and muted accents. For example, the <strong>Fundamental Theorem of Calculus</strong> below is highlighted with our accent color for emphasis.</p>

                <div class="key-equation-wrapper">
                    <div class="key-equation">
                        $$ \int_{a}^{b} f(x) \, dx = F(b) - F(a) $$
                    </div>
                </div>

                <div class="card">
                    <h3 class="text-2xl mb-6">Interactive Color Customizer</h3>
                    <p class="mb-6">Below are the core colors for this page. Click to expand and use the sliders, or click and drag directly on the L, C, and H values to adjust them in real-time.</p>
                    
                    <div class="space-y-4" id="color-editor">
                        <!-- Color controls will be dynamically inserted here by JavaScript -->
                    </div>
                </div>
            </section>

        </main>
        
        <footer class="text-center mt-16 pt-8 border-t border-gray-800">
            <p>Built to demonstrate the power and elegance of OKLCH.</p>
        </footer>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const colorEditor = document.getElementById('color-editor');
            const root = document.documentElement;

            const colorVariables = [
                { name: 'Surface (Background)', var: 'surface-1' },
                { name: 'Surface (Card/Modal)', var: 'surface-2' },
                { name: 'Surface (Interactive)', var: 'surface-3' },
                { name: 'Text (Primary)', var: 'text-primary' },
                { name: 'Text (Secondary)', var: 'text-secondary' },
                { name: 'Accent (Equation)', var: 'accent-equation' },
                { name: 'Accent (Link)', var: 'accent-link' },
            ];
            
            let activePanel = null;

            colorVariables.forEach(color => {
                const container = document.createElement('div');
                container.className = 'color-control-container';

                const initialL = getComputedStyle(root).getPropertyValue(`--${color.var}-l`).trim();
                const initialC = getComputedStyle(root).getPropertyValue(`--${color.var}-c`).trim();
                const initialH = getComputedStyle(root).getPropertyValue(`--${color.var}-h`).trim();

                container.innerHTML = `
                    <div class="flex items-center gap-4 cursor-pointer color-control-header">
                        <div class="color-swatch" style="background-color: var(--${color.var})"></div>
                        <div class="flex-grow">
                            <h4 class="text-lg font-semibold">${color.name}</h4>
                            <p class="text-sm font-mono text-gray-400 value-label" id="value-${color.var}">
                                oklch(<span class="draggable-value" data-param="l" data-var="${color.var}" data-step="0.1">${initialL}</span>% 
                                <span class="draggable-value" data-param="c" data-var="${color.var}" data-step="0.001">${initialC}</span> 
                                <span class="draggable-value" data-param="h" data-var="${color.var}" data-step="1">${initialH}</span>)
                            </p>
                        </div>
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 text-gray-500 transition-transform chevron"><path d="m6 9 6 6 6-6"></path></svg>
                    </div>
                    <div class="color-control-panel" id="panel-${color.var}">
                        <label class="slider-label" for="l-${color.var}">Lightness</label>
                        <input type="range" id="l-${color.var}" min="0" max="100" step="0.1" value="${initialL}">
                        <span class="value-label" id="l-val-${color.var}">${initialL}</span>
                        
                        <label class="slider-label" for="c-${color.var}">Chroma</label>
                        <input type="range" id="c-${color.var}" min="0" max="0.37" step="0.001" value="${initialC}">
                        <span class="value-label" id="c-val-${color.var}">${initialC}</span>

                        <label class="slider-label" for="h-${color.var}">Hue</label>
                        <input type="range" id="h-${color.var}" min="0" max="360" step="1" value="${initialH}">
                        <span class="value-label" id="h-val-${color.var}">${initialH}</span>
                    </div>
                `;
                colorEditor.appendChild(container);

                const lSlider = container.querySelector(`#l-${color.var}`);
                const cSlider = container.querySelector(`#c-${color.var}`);
                const hSlider = container.querySelector(`#h-${color.var}`);

                const updateColor = (variable, param, value) => {
                    // Update the specific L, C, or H variable
                    root.style.setProperty(`--${variable}-${param}`, value);
                    
                    // Update the UI controls
                    const slider = document.getElementById(`${param}-${variable}`);
                    if (slider) slider.value = value;

                    const valDisplay = document.getElementById(`${param}-val-${variable}`);
                    if (valDisplay) valDisplay.textContent = parseFloat(value).toFixed(param === 'c' ? 3 : 1);
                    
                    const inlineValDisplay = container.querySelector(`.draggable-value[data-var='${variable}'][data-param='${param}']`);
                    if(inlineValDisplay) inlineValDisplay.textContent = parseFloat(value).toFixed(param === 'c' ? 3 : 1);
                };
                
                // Slider event listeners
                lSlider.addEventListener('input', () => updateColor(color.var, 'l', lSlider.value));
                cSlider.addEventListener('input', () => updateColor(color.var, 'c', cSlider.value));
                hSlider.addEventListener('input', () => updateColor(color.var, 'h', hSlider.value));
                
                // Accordion toggle logic
                const header = container.querySelector('.color-control-header');
                const panel = container.querySelector('.color-control-panel');
                const chevron = container.querySelector('.chevron');
                header.addEventListener('click', (e) => {
                    if (e.target.classList.contains('draggable-value')) return; // Don't toggle if clicking a value
                    if (activePanel && activePanel !== panel) {
                        activePanel.classList.remove('active');
                        activePanel.previousElementSibling.querySelector('.chevron').style.transform = 'rotate(0deg)';
                    }
                    panel.classList.toggle('active');
                    chevron.style.transform = panel.classList.contains('active') ? 'rotate(180deg)' : 'rotate(0deg)';
                    activePanel = panel.classList.contains('active') ? panel : null;
                });

                // Inline draggable value logic
                container.querySelectorAll('.draggable-value').forEach(el => {
                    el.addEventListener('mousedown', startDrag);
                });
            });

            let dragElement = null;
            let startX, startValue;

            function startDrag(e) {
                e.preventDefault();
                dragElement = e.target;
                startX = e.clientX;
                startValue = parseFloat(dragElement.textContent);
                document.addEventListener('mousemove', drag);
                document.addEventListener('mouseup', stopDrag);
                document.body.style.cursor = 'ew-resize';
            }

            function drag(e) {
                if (!dragElement) return;
                const dx = e.clientX - startX;
                const param = dragElement.dataset.param;
                const variable = dragElement.dataset.var;
                const step = parseFloat(dragElement.dataset.step);

                let newValue = startValue + dx * step;

                // Clamp values to their respective ranges
                if (param === 'l') newValue = Math.max(0, Math.min(100, newValue));
                if (param === 'c') newValue = Math.max(0, Math.min(0.37, newValue));
                if (param === 'h') newValue = (newValue % 360 + 360) % 360; // Wrap hue

                // Update the color using the same central function
                const lSlider = document.getElementById(`l-${variable}`);
                const cSlider = document.getElementById(`c-${variable}`);
                const hSlider = document.getElementById(`h-${variable}`);
                if (param === 'l') lSlider.value = newValue;
                if (param === 'c') cSlider.value = newValue;
                if (param === 'h') hSlider.value = newValue;
                lSlider.dispatchEvent(new Event('input'));
                cSlider.dispatchEvent(new Event('input'));
                hSlider.dispatchEvent(new Event('input'));
            }

            function stopDrag() {
                document.removeEventListener('mousemove', drag);
                document.removeEventListener('mouseup', stopDrag);
                document.body.style.cursor = 'default';
                dragElement = null;
            }
        });
    </script>
</body>
</html>
